{% load viewer_extras %}
<html>
<body>

<button id="expand-all">Expand All</button>
<button id="export">Export</button>
<form
  id="save-form"
  style="display:inline"
  data-scout-id="{{ view.kwargs.id }}"
  data-url="{% url 'results_save' %}"
>
  {% csrf_token %}
  <input type="submit" id="save" value="Save">
</form>
<button id="undo">Undo Delete</button>

<pre id="serialization"></pre>
<table>
  <tbody>
  {% for team in object_list %}
    <tr
      data-player="{{ team.player.name }}"
      data-player-num="{{ team.player.player_num }}"
    >
      <td>
        <button class="remove-button">Remove</button>
        <button class="expand-button">Expand</button>
      </td>
      {% for player in team.replay.player_set.all %}
        <td
          {% if player.name == team.player.name %}
            class="current-player"
          {% endif %}
        >
          {{ player.name }}
        </td>
      {% endfor %}
      <td><a href="{{ team.replay.url }}">Replay</a></td>
      {% for pokemon in team.data %}
        <td
          class="pokemon"
          data-pokemon="{{ pokemon }}"
          data-export="{{ pokemon }}"
        >
          <img src="https://www.smogon.com/forums//media/minisprites/{{ pokemon.lower|to_sprite }}.png"/>
        </td>
      {% endfor %}
    </tr>
  {% endfor %}
  </tbody>
</table>
</body>


<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>

{% load static %}
<script src="{% static 'replay_viewer/results.js' %}"></script>

<style>
td {
  border: 1px solid black;
}
.pokemon, tr {
  cursor: move;
}
.current-player {
  background-color: yellow;
}
</style>
</html>
